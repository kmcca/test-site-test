"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[28190],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),u=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(r),m=n,E=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return r?a.createElement(E,o(o({ref:t},p),{},{components:r})):a.createElement(E,o({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var u=2;u<i;u++)o[u]=r[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},98689:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=r(87462),n=(r(67294),r(3905));const i={title:"Remove Duplicate Jira Issues",slug:"/r/t_jira_remove_dups"},o=void 0,s={unversionedId:"guides/integrations/ticketing/jira_integration/install_jira_integration/jira_remove_duplicate_issues",id:"guides/integrations/ticketing/jira_integration/install_jira_integration/jira_remove_duplicate_issues",title:"Remove Duplicate Jira Issues",description:"If you are upgrading from a version of the Veracode Integration for Jira that is earlier than 3.5.0 and notice duplicate Jira issues during the upgrade, use this procedure to remove duplicate issues.",source:"@site/docs/guides/04_integrations/07_ticketing/04_jira_integration/02_install_jira_integration/03_jira_remove_duplicate_issues.md",sourceDirName:"guides/04_integrations/07_ticketing/04_jira_integration/02_install_jira_integration",slug:"/r/t_jira_remove_dups",permalink:"/km-docusaurus-test/r/t_jira_remove_dups",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Remove Duplicate Jira Issues",slug:"/r/t_jira_remove_dups"},sidebar:"tutorialSidebar",previous:{title:"Upgrade an Old Version of the Veracode Integration for Jira",permalink:"/km-docusaurus-test/r/t_jira_upgrade"},next:{title:"Uninstall the Veracode Integration for Jira",permalink:"/km-docusaurus-test/r/t_jira_uninstall"}},l={},u=[],p={toc:u};function c(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"If you are upgrading from a version of the Veracode Integration for Jira that is earlier than 3.5.0 and notice duplicate Jira issues during the upgrade, use this procedure to remove duplicate issues."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"To complete this task:")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Run the appropriate SQL query to obtain a comma-separated list of IDs of the duplicate issues."),(0,n.kt)("admonition",{parentName:"li",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"If you have non-terminal values, other than Open and To Do, in the Status field defined in your Jira workflow, you must update the SQL query to include those additional Status field values.")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For a MySQL database:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"SELECT GROUP_CONCAT(ID) FROM jiraissue WHERE ID IN (SELECT ISSUE\nFROM customfieldvalue\nWHERE\n    customfieldvalue.CUSTOMFIELD = (SELECT\n         ID\n    FROM\n         customfield\n    WHERE\n         CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field'\n         AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher')\n         AND customfieldvalue.STRINGVALUE IN (SELECT STRINGVALUE FROM customfieldvalue WHERE\n         CUSTOMFIELD = (SELECT ID\n    FROM\n        customfield\n    WHERE\n        CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-field'\n        AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-searcher')))\n        AND (issuestatus IN (SELECT ID FROM issuestatus WHERE pname = 'Open' OR pname = 'To Do')) LIMIT 0,500)\n        AS jiraissue_temp_2  ON jiraissue_temp_1.ID = jiraissue_temp_2.jiraissue_id;\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For an Oracle database:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"SELECT LISTAGG(ID, ', ') WITHIN GROUP (ORDER BY ID) jiraissue_ids FROM jiraissue jiraissue_temp_1 INNER JOIN (SELECT jiraissue_id FROM (SELECT ID AS jiraissue_id, ROW_NUMBER() OVER( order by ID asc ) rn  FROM jiraissue WHERE ID IN (SELECT ISSUE FROM customfieldvalue\nWHERE\n   customfieldvalue.CUSTOMFIELD = (SELECT\n       ID\n   FROM\n       customfield\n   WHERE\n       CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field'\n       AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher')\nAND customfieldvalue.STRINGVALUE IN (SELECT STRINGVALUE FROM customfieldvalue WHERE\nCUSTOMFIELD = (SELECT\n       ID\n   FROM\n       customfield\n   WHERE\n       CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-field'\n       AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-searcher')))\n       AND (issuestatus IN (SELECT ID FROM issuestatus WHERE pname = 'Open' OR pname = 'To Do'))) where rn BETWEEN 1 AND 500)\n       jiraissue_temp_2  ON jiraissue_temp_1.ID = jiraissue_temp_2.jiraissue_id;\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For a PostgreSQL database:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"SELECT ARRAY_AGG(ID) FROM jiraissue AS jiraissue_temp_1 INNER JOIN (SELECT ID AS jiraissue_id  FROM jiraissue WHERE ID IN (SELECT ISSUE\nFROM customfieldvalue\nWHERE\n    customfieldvalue.CUSTOMFIELD = (SELECT\n        ID\n    FROM\n        customfield\n    WHERE\n        CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-field'\n        AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.synchronize.veracode-jira-flaws-synchronizer:veracode-link-searcher')\nAND customfieldvalue.STRINGVALUE IN (SELECT STRINGVALUE FROM customfieldvalue WHERE\nCUSTOMFIELD = (SELECT\n        ID\n    FROM\n        customfield\n    WHERE\n        CUSTOMFIELDTYPEKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-field'\n        AND CUSTOMFIELDSEARCHERKEY = 'com.veracode.jira.plugin.link.VeracodeLink:veracode-link-searcher')))\n        AND (issuestatus IN (SELECT ID FROM issuestatus WHERE pname = 'Open' OR pname = 'To Do')) LIMIT 500)\n        AS jiraissue_temp_2  ON jiraissue_temp_1.ID = jiraissue_temp_2.jiraissue_id;\n")))),(0,n.kt)("admonition",{parentName:"li",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"If you are using a database other than MySQL, Oracle, or PostgreSQL, contact Veracode Technical Support for assistance."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In Jira, select ",(0,n.kt)("strong",{parentName:"p"},"Issues")," > ",(0,n.kt)("strong",{parentName:"p"},"Search for issues"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Switch to advanced search and enter this JQL search query, replacing ",(0,n.kt)("inlineCode",{parentName:"p"},"{duplicate_ticket_ids}")," with the output of the SQL query you ran in step 1:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"issuekey in ({duplicate_ticket_ids})\n")),(0,n.kt)("p",{parentName:"li"},"For example, if the SQL query output is ",(0,n.kt)("inlineCode",{parentName:"p"},"10400,10401,10402,10403,10404,10405,10406,10408"),", then your search query in Jira would be: ",(0,n.kt)("inlineCode",{parentName:"p"},"issuekey in (10400,10401,10402,10403,10404,10405,10406,10408)")),(0,n.kt)("p",{parentName:"li"},"A text area opens, into which you can enter JQL queries.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Run the Issue search to view the list of Jira issues that match the IDs you specified.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select ",(0,n.kt)("strong",{parentName:"p"},"Tools")," > ",(0,n.kt)("strong",{parentName:"p"},"Bulk Change")," to start the bulk change for all issues that the advanced search returned.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In the Choose Issues step, select the ",(0,n.kt)("strong",{parentName:"p"},"Select All")," checkbox and click ",(0,n.kt)("strong",{parentName:"p"},"Next"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In the Choose Operation step, select ",(0,n.kt)("strong",{parentName:"p"},"Delete Issues")," and click ",(0,n.kt)("strong",{parentName:"p"},"Next"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"When prompted, click ",(0,n.kt)("strong",{parentName:"p"},"Confirm"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Repeat steps 1-8 until the SQL query output on the Choose Issues step no longer returns any results, which means that there are no more duplicate issues to delete."))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Next steps:")),(0,n.kt)("p",null,"If you suspended your upgrade procedure to remove these duplicate issues, you can now ",(0,n.kt)("a",{parentName:"p",href:"https://docs.veracode.com/r/t_jira_upgrade"},"go back to that procedure and continue from step 3"),"."))}c.isMDXComponent=!0}}]);